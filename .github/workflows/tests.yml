name: ðŸŽ­ Tests
on:
  push:
    paths-ignore:
      - .chglog/**
      - .github/**
      - "!.github/workflows/tests.yml"
      - .editorconfig
      - .gitattributes
      - .gitignore
      - .htaccess
      - "**.md"
    branches:
      - master
  pull_request:
    paths-ignore:
      - .chglog/**
      - .github/**
      - "!.github/workflows/tests.yml"
      - .editorconfig
      - .gitattributes
      - .gitignore
      - .htaccess
      - "**.md"
    branches:
      - master
  pull_request_target:
    types: [opened, synchronize, ready_for_review]

jobs:
  silverstripe-module:
    name: ðŸ§° Silverstripe Module Testsuite
    uses: syntro-opensource/workflows/.github/workflows/silverstripe-module.yml@master
    with:
      phpunit: true
      phpunit_config_file: tests/phpunit.xml
      phpstan: true
      phpstan_config: tests/phpstan.neon
      phpstan_bootstrap: tests/bootstrap-phpstan.php
      phpcs: true
  # silverstripe-client:
  #   name: ðŸ“¦ Client Testsuite
  #   uses: syntro-opensource/workflows/.github/workflows/client.yml@master
  #   with:
  #     eslint: true
  #     eslint_dir: client/src/seo-field/
  #     eslint_configfile: client/src/seo-field/.eslintrc
  #     eslint_ext:
  #     eslint_max-warnings:
  #     stylelint: true
  #     stylelint_glob: client/src/seo-field/**/*.scss
  #     stylelint_max-warnings:
